version: '3'

env:
  MODULE_DIR:
    sh: echo $TASK_MODULES_DIR/Ingress

tasks:
  install:
    cmds:
      # Create ingress namespace if it does not exist.
      - kubectl create namespace ingress-basic --dry-run=client -o yaml | kubectl apply -f -
      # Install Ingress.
      - $MODULE_DIR/scripts/helmInstallnginxIngress.sh
  setup:
    cmds:
      - task: install