version: '3'

tasks:
  kube:create:ns:
    cmds:
      # Create ingress namespace if it does not exist.
      - kubectl create namespace ingress-basic --dry-run=client -o yaml | kubectl apply -f -
  install:
    dir: "$TASK_MODULES_DIR/Ingress"
    deps: [kube:create:ns]
    cmds:
      # Install Ingress.
      - ./scripts/helmInstallnginxIngress.sh
  setup:
    cmds:
      - task: install